


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/target-highlight.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pro.min.css" media="all" />
  <link rel="stylesheet" href="../_static/doxyrest-pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Xilinx Alveo Graph Analytics Products
          

          
          </a>

          
            
            
              <div class="version">
                2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cosinesim/usecases.html"> Recommendation System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../louvainmod/fraud-detection.html"> Fraud Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mis/supply-chain.html"> Supply Chain Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fuzzymatch/entity-resolution.html"> Entity Resolution</a></li>
</ul>
<p class="caption"><span class="caption-text">Algorithms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cosinesim/index.html">Cosine Similarity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../louvainmod/index.html">Louvain Modularity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mis/index.html">Maximal Independent Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fuzzymatch/index.html">Levenstein Edit Distance (Fuzzy Match)</a></li>
</ul>
<p class="caption"><span class="caption-text">Notice</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notice.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notice.html#trademark-notice">Trademark Notice</a></li>
</ul>

            
			
				<h3>Versions</h3>
				<ul>
				  <li><a href=""></a></li>
				</ul>
			
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Xilinx Alveo Graph Analytics Products</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Main Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="main-guide">
<span id="doxid-indexpage"></span><span id="index-0"></span><h1>Main Guide<a class="headerlink" href="#main-guide" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>The Cosine Similarity Alveo Product allows you to use a Xilinx Alveo accelerator card to find the best matches of a given <em>target vector</em> of integers within a set of <em>population vectors</em> of integers. The target vector is paired with each population vector in turn to compute the ` &lt;<a class="reference external" href="https://en.wikipedia.org/wiki/Cosine_similarity">https://en.wikipedia.org/wiki/Cosine_similarity</a>&gt;`__ score of the pair. The scores are sorted, and the highest scores are returned, along with an identifier (called its <em>row index</em>) for the corresponding population vectors.</p>
</div>
<div class="section" id="using-the-api">
<h1>Using the API<a class="headerlink" href="#using-the-api" title="Permalink to this headline">¶</a></h1>
<p>Follow the steps below to use the API.</p>
<ol class="arabic simple">
<li><p>Instantiate a <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a> object</p></li>
<li><p>Load the population vectors into the Alveo accelerator card</p></li>
<li><p>Run one or more matches by supplying for each run a target vector and the number of matches to return</p></li>
</ol>
<div class="section" id="instantiate-a-object">
<h2>Instantiate a  object<a class="headerlink" href="#instantiate-a-object" title="Permalink to this headline">¶</a></h2>
<p>To instantiate a <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a> object, first select the options for the object by instantiating an <a class="reference internal" href="struct_xilinx_apps_cosinesim_Options.html#doxid-structxilinx-apps-1-1cosinesim-1-1-options"><span class="std std-ref">Options</span></a> object and setting its members, as shown in the example below. Note that all API identifiers are contained within the namespace xilinx_apps::cosinesim.</p>
<pre class="highlight literal-block"><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cosinesim.hpp&quot;</span><span class="cp"></span>

<span class="n">xilinx_apps</span><span class="o">::</span><span class="n">cosinesim</span><span class="o">::</span><span class="n">Options</span><span class="w"> </span><span class="n">options</span><span class="p">;</span><span class="w"></span>
<span class="n">options</span><span class="p">.</span><span class="n">vecLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span><span class="w">  </span><span class="c1">// every target vector and population vector will have 200 elements</span>
<span class="n">options</span><span class="p">.</span><span class="n">numDevices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">Alveo</span><span class="w"> </span><span class="n">accelerator</span><span class="w"> </span><span class="n">cards</span></pre>
<p><a class="reference internal" href="struct_xilinx_apps_cosinesim_Options.html#doxid-structxilinx-apps-1-1cosinesim-1-1-options-1a6afc35f870a7d8bce2ecddd5c65def58"><span class="std std-ref">Options::vecLength</span></a> determines the <em>vector length</em>, or number of elements, of every population and target vector. <a class="reference internal" href="struct_xilinx_apps_cosinesim_Options.html#doxid-structxilinx-apps-1-1cosinesim-1-1-options-1aebdcc42b66255b4861d3b95824c6a30d"><span class="std std-ref">Options::numDevices</span></a> determines how many Alveo accelerator cards to use for storing population vectors and executing the cosine similarity match. <a class="reference internal" href="struct_xilinx_apps_cosinesim_Options.html#doxid-structxilinx-apps-1-1cosinesim-1-1-options-1aebdcc42b66255b4861d3b95824c6a30d"><span class="std std-ref">Options::numDevices</span></a> should be at least 1 and no more than the number of installed Alveo acceleration cards. If you specify fewer than the number of installed cards, the choice of which cards are used is undefined.</p>
<p>NOTE: Setting the <code class="docutils literal notranslate"><span class="pre">xclbinPath</span></code> and <code class="docutils literal notranslate"><span class="pre">xcbinPathCStr</span></code> data members of the <a class="reference internal" href="struct_xilinx_apps_cosinesim_Options.html#doxid-structxilinx-apps-1-1cosinesim-1-1-options"><span class="std std-ref">Options</span></a> object currently has no effect, as the XCLBIN (FPGA program) file is always picked up from the default installation location under <code class="docutils literal notranslate"><span class="pre">/opt/xilinx</span></code>.</p>
<p>Next, instantiate the <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a> object. The template parameter specifies the integral type of each target and population vector element. Currently, only 32-bit signed integer types, such as <code class="docutils literal notranslate"><span class="pre">std::int32_t</span></code>, are supported.</p>
<pre class="highlight literal-block"><span></span><span class="n">xilinx_apps</span><span class="o">::</span><span class="n">cosinesim</span><span class="o">::</span><span class="n">CosineSim</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">int32_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cosineSim</span><span class="p">(</span><span class="n">options</span><span class="p">);</span></pre>
</div>
<div class="section" id="load-the-population-vectors">
<h2>Load the population vectors<a class="headerlink" href="#load-the-population-vectors" title="Permalink to this headline">¶</a></h2>
<p>Loading the population vectors into the Alveo accelerator card is accomplished with the procedure shown in the code example below.</p>
<pre class="highlight literal-block"><span></span><span class="n">cosineSim</span><span class="p">.</span><span class="n">startLoadPopulation</span><span class="p">(</span><span class="n">myPopVectors</span><span class="p">.</span><span class="n">size</span><span class="p">());</span><span class="w"></span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">myIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">myIndex</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">myPopVectors</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">myIndex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Get a population vector buffer and its row index</span>
<span class="w">    </span><span class="n">xilinx_apps</span><span class="o">::</span><span class="n">cosinesim</span><span class="o">::</span><span class="n">RowIndex</span><span class="w"> </span><span class="n">rowIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cosineSim</span><span class="p">.</span><span class="n">getPopulationVectorBuffer</span><span class="p">(</span><span class="n">rowIndex</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Fill the buffer and save the row index</span>
<span class="w">    </span><span class="n">memcpy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">myPopVectors</span><span class="p">[</span><span class="n">myIndex</span><span class="p">],</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">myPopVectors</span><span class="p">[</span><span class="n">myIndex</span><span class="p">]));</span><span class="w"></span>
<span class="w">    </span><span class="n">popMap</span><span class="p">[</span><span class="n">rowIndex</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myIndex</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Mark the buffer as finished</span>
<span class="w">    </span><span class="n">cosineSim</span><span class="p">.</span><span class="n">finishCurrentPopulationVector</span><span class="p">(</span><span class="n">buf</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">cosineSim</span><span class="p">.</span><span class="n">finishLoadPopulation</span><span class="p">();</span></pre>
<p>The entire loading process is started and ended with calls to <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSimBase.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-base-1a184ea540f34274337573aa23a1a1531e"><span class="std std-ref">CosineSim::startLoadPopulation()</span></a> and <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSimBase.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-base-1ae33387b43ace88f1349d7a532fb94a6b"><span class="std std-ref">CosineSim::finishLoadPopulation()</span></a>, respectively. For <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSimBase.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-base-1a184ea540f34274337573aa23a1a1531e"><span class="std std-ref">CosineSim::startLoadPopulation()</span></a> you must supply the total number of population vectors to load. In between the start and finish calls, for every population vector to add, you must fetch a buffer from the <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a> object and fill it with your population vector values.</p>
<p>The buffer to fill is fetched with <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-1a9714a6a8e055976e49c477ef5f5f362f"><span class="std std-ref">CosineSim::getPopulationVectorBuffer()</span></a>. In addition to returning a pointer to the buffer, the function sets its argument to the <em>row index</em> of the population vector within the Alveo card. Because the row index may be different from your data index, you should save the row index in a map from row index to your population vector (or associated object), so that when you perform the match, you can identify your population vector based on the row index returned in the match results, as demonstrated in the next section.</p>
<p>As the returned buffer is treated as a plain C integer array, you can use any C or C++ technique to copy vector elements into the buffer. In the example above, <code class="docutils literal notranslate"><span class="pre">myPopVectors[myIndex]</span></code> is assumed to be a <code class="docutils literal notranslate"><span class="pre">Value[]</span></code> array, where <code class="docutils literal notranslate"><span class="pre">Value</span></code> is the template parameter type of <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a>, so <code class="docutils literal notranslate"><span class="pre">memcpy</span></code> is used.</p>
<p>After filling the buffer, you must call <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-1ad3fe9ba20f0a327deb15d558e882843e"><span class="std std-ref">CosineSim::finishCurrentPopulationVector()</span></a> to process the population vector. After <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-1ad3fe9ba20f0a327deb15d558e882843e"><span class="std std-ref">CosineSim::finishCurrentPopulationVector()</span></a> is called, there is no way to modify the vector, and once CosineSim::finishLoadPopulationVectors() has been called, there is no way to add more population vectors. To change the population vector set, you will need to resubmit all population vectors, starting with another call to <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSimBase.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-base-1a184ea540f34274337573aa23a1a1531e"><span class="std std-ref">CosineSim::startLoadPopulation()</span></a>.</p>
<p><strong>Multi-threading note:</strong> While the API is designed to accommodate writing to population vectors from multiple threads simultaneously, the API functions themselves are not thread safe. To use the API in a multi-threaded application,you must wrap each call to <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-1a9714a6a8e055976e49c477ef5f5f362f"><span class="std std-ref">CosineSim::getPopulationVectorBuffer()</span></a> and <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-1ad3fe9ba20f0a327deb15d558e882843e"><span class="std std-ref">CosineSim::finishCurrentPopulationVector()</span></a> in a critical section (with mutex locking). Once a thread has acquired a buffer, the thread can write to the buffer in parallel with other threads writing to their separate buffers. The get and finish calls do not need to be in the same critical section. That is, you can unlock the mutex between the two function calls.</p>
</div>
<div class="section" id="run-a-match">
<h2>Run a match<a class="headerlink" href="#run-a-match" title="Permalink to this headline">¶</a></h2>
<p>After the population vectors have been loaded into the Alveo accelerator card, you can call <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-1a7ce1782322ecdd449a7268e6a8f329fd"><span class="std std-ref">CosineSim::matchTargetVector()</span></a> with a target vector to find the population vectors that have the highest cosine similarity with the target vector. The example below shows how to use the function.</p>
<pre class="highlight literal-block"><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">xilinx_apps</span><span class="o">::</span><span class="n">cosinesim</span><span class="o">::</span><span class="n">Result</span><span class="o">&gt;</span><span class="w"> </span><span class="n">results</span><span class="p">;</span><span class="w"></span>
<span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cosineSim</span><span class="p">.</span><span class="n">matchTargetVector</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">testVector</span><span class="p">);</span><span class="w"></span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">xilinx_apps</span><span class="o">::</span><span class="n">cosinesim</span><span class="o">::</span><span class="n">Result</span><span class="w"> </span><span class="o">&amp;</span><span class="n">result</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">results</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">similarity</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;       &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">popMap</span><span class="p">[</span><span class="n">result</span><span class="p">.</span><span class="n">index</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span></pre>
<p>In the example, <code class="docutils literal notranslate"><span class="pre">testVector</span></code>, the target vector, is assumed to be a C array of <code class="docutils literal notranslate"><span class="pre">Value</span></code> integers. Along with that target vector, the function takes the number of results that you would like it to return. In this case, we’re requesting the top 10 matches. The maximum number of results currently supported is 100. The function returns a <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> of <a class="reference internal" href="struct_xilinx_apps_cosinesim_Result.html#doxid-structxilinx-apps-1-1cosinesim-1-1-result"><span class="std std-ref">Result</span></a> objects, where each object contains the cosine similarity score (<a class="reference internal" href="struct_xilinx_apps_cosinesim_Result.html#doxid-structxilinx-apps-1-1cosinesim-1-1-result-1ab0bcfb946c4612620298e776b3e1980f"><span class="std std-ref">Result::similarity</span></a>) and row index (<a class="reference internal" href="struct_xilinx_apps_cosinesim_Result.html#doxid-structxilinx-apps-1-1cosinesim-1-1-result-1ab76fcdbddd803e93a972ccfb693805b6"><span class="std std-ref">Result::index</span></a>) of a population vector. Use the map you built during population vector loading to convert the returned row index back to your population vector index or object.</p>
<p>You can call <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-1a7ce1782322ecdd449a7268e6a8f329fd"><span class="std std-ref">CosineSim::matchTargetVector()</span></a> repeatedly with different target vectors. The target vectors do not need to be present in the set of population vectors, as each call to <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-1a7ce1782322ecdd449a7268e6a8f329fd"><span class="std std-ref">CosineSim::matchTargetVector()</span></a> transfers the target vector to the Alveo accelerator card before running the cosine similarity search.</p>
</div>
</div>
<div class="section" id="alveo-accelerator-card-storage-capacity">
<h1>Alveo accelerator card storage capacity<a class="headerlink" href="#alveo-accelerator-card-storage-capacity" title="Permalink to this headline">¶</a></h1>
<p>The number of population vectors that an Alveo accelerator card can hold depends on both the vector length of a population vector as well as the memory capacity of the Alveo accelerator card. The Alveo U50 accelerator card, for example, can hold approximately</p>
<p>1.6 billion / <code class="docutils literal notranslate"><span class="pre">len</span></code></p>
<p>population vectors, where <code class="docutils literal notranslate"><span class="pre">len</span></code> is the vector length rounded up to a multiple of 4.</p>
</div>
<div class="section" id="error-handling">
<h1>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h1>
<p>Every <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a> member function can potentially throw an exception of type <a class="reference internal" href="class_xilinx_apps_cosinesim_Exception.html#doxid-classxilinx-apps-1-1cosinesim-1-1-exception"><span class="std std-ref">Exception</span></a> if a run-time error, such as a hardware communication error, is encountered. You can wrap your load and match operations in a <code class="docutils literal notranslate"><span class="pre">try</span></code> / <code class="docutils literal notranslate"><span class="pre">catch</span></code> block to handle the error. The exception object provides the <a class="reference internal" href="class_xilinx_apps_cosinesim_Exception.html#doxid-classxilinx-apps-1-1cosinesim-1-1-exception-1aab4a5d2f8c679ee8e963501ee7d9b5f1"><span class="std std-ref">Exception::what()</span></a> member function for retrieving a text message for the error. As there are currently no programmatically recoverable errors, the <a class="reference internal" href="class_xilinx_apps_cosinesim_Exception.html#doxid-classxilinx-apps-1-1cosinesim-1-1-exception"><span class="std std-ref">Exception</span></a> object does not supply an error code. As with any hardware device, recovering from an Alveo accelerator card error may require the intervention of a system operator, so you should consider sending the error message to a destination suitable for the system administrator to access it.</p>
<p>API usage errors are handled within <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a> simply by emitting an error message to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> or <code class="docutils literal notranslate"><span class="pre">stderr</span></code> and aborting. API usage errors include passing out-of-range or unsupported values as arguments to <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a> member functions.</p>
</div>
<div class="section" id="linking-your-application">
<h1>Linking your application<a class="headerlink" href="#linking-your-application" title="Permalink to this headline">¶</a></h1>
<p>You have a few choices for how to link the API code into your application:</p>
<ul class="simple">
<li><p>Linking directly with the Cosine Similarity shared library (.so)</p></li>
<li><p>Linking with the Cosine Similarity dynamic loader archive (.a)</p></li>
<li><p>Including the Cosine Similarity dynamic loader source file (.cpp)</p></li>
</ul>
<div class="section" id="linking-directly-so">
<h2>Linking directly (.so)<a class="headerlink" href="#linking-directly-so" title="Permalink to this headline">¶</a></h2>
<p>The simplest method of linking the API into your application is to link directly with the shared library (.so), placing a run-time dependency of your application on the shared library. Simply add the following arguments to your link line:</p>
<pre class="highlight literal-block"><span></span><span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">xilinx</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">graphanalytics</span><span class="o">/</span><span class="n">cosinesim</span><span class="o">/</span><span class="mf">1.1</span><span class="o">/</span><span class="n">lib</span><span class="w"> </span><span class="o">-</span><span class="n">lXilinxCosineSim</span></pre>
</div>
<div class="section" id="linking-with-the-dynamic-loader-archive-a">
<h2>Linking with the dynamic loader archive (.a)<a class="headerlink" href="#linking-with-the-dynamic-loader-archive-a" title="Permalink to this headline">¶</a></h2>
<p>To avoid having a run-time dependency on the shared library, but instead load the shared library on demand (internally using <code class="docutils literal notranslate"><span class="pre">dlopen()</span></code>), you can link with the loader archive by adding the following arguments to your link line:</p>
<pre class="highlight literal-block"><span></span><span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">xilinx</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">graphanalytics</span><span class="o">/</span><span class="n">cosinesim</span><span class="o">/</span><span class="mf">1.1</span><span class="o">/</span><span class="n">lib</span><span class="w"> </span><span class="o">-</span><span class="n">lXilinxCosineSim_loader</span><span class="w"> </span><span class="o">-</span><span class="n">ldl</span></pre>
</div>
<div class="section" id="including-the-dynamic-loader-source-file-cpp">
<h2>Including the dynamic loader source file (.cpp)<a class="headerlink" href="#including-the-dynamic-loader-source-file-cpp" title="Permalink to this headline">¶</a></h2>
<p>Another way to avoid a run-time dependency on the shared library is by including the loader source file in a header or source file of your program:</p>
<pre class="highlight literal-block"><span></span><span class="cp">#define XILINX_COSINESIM_INLINE_IMPL</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cosinesim.hpp&quot;</span><span class="cp"></span>

<span class="c1">// Code that uses the API goes here</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cosinesim_loader.cpp&quot;</span></pre>
<p>Note that you will still have to include <code class="docutils literal notranslate"><span class="pre">-ldl</span></code> on your link line to pull in the standard dynamic loading library.</p>
<p>The loader source file is located in <code class="docutils literal notranslate"><span class="pre">/opt/xilinx/apps/graphanalytics/cosinesim/1.1/src</span></code>. Note the macro definition that comes before the inclusion of <code class="docutils literal notranslate"><span class="pre">cosinesim.hpp</span></code>.</p>
<p><strong>TIP:</strong> When using either dynamic loading technique, if the order of symbol loading causes unexplained behavior in your application, you can try adding <code class="docutils literal notranslate"><span class="pre">libXilinxCosineSim.so</span></code> to the list of pre-loaded shared libraries, as explained in ` &lt;<a class="reference external" href="https://stackoverflow.com/questions/426230/what-is-the-ld-preload-trick">https://stackoverflow.com/questions/426230/what-is-the-ld-preload-trick</a>&gt;`__.</p>
</div>
</div>
<div class="section" id="type-erased-base-class">
<h1>Type-erased  base class<a class="headerlink" href="#type-erased-base-class" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a> class is a template class that ensures type safety for vector elements. However, if you need a type-free non-template class, you can use <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSim.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim"><span class="std std-ref">CosineSim</span></a> ‘s base class, <a class="reference internal" href="class_xilinx_apps_cosinesim_CosineSimBase.html#doxid-classxilinx-apps-1-1cosinesim-1-1-cosine-sim-base"><span class="std std-ref">CosineSimBase</span></a>, directly. Its member functions are the same as for the template class, except that data pointers are of type <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code>, and you must also pass the length in bytes of a vector element.</p>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on April 26, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2022, Xilinx
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>